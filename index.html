<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/Blog/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/Blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/Blog/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/Blog/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/Blog/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/Blog/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/Blog/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/Blog/atom.xml" title="你的ENTER键价值千亿" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="你的ENTER键价值千亿">
<meta property="og:url" content="https://josephagk.github.io/index.html">
<meta property="og:site_name" content="你的ENTER键价值千亿">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="你的ENTER键价值千亿">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/Blog/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://josephagk.github.io/">





  <title>你的ENTER键价值千亿</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/Blog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">你的ENTER键价值千亿</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/Blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/Blog/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/Blog/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/Blog/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/Blog/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/Blog/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://josephagk.github.io/Blog/2019/01/31/ClassException/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JosephGK">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="你的ENTER键价值千亿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Blog/2019/01/31/ClassException/" itemprop="url">ClassNotFoundException和NoClassDefFoundException</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-31T00:00:00+08:00">
                2019-01-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><ul>
<li>两异常跟java类加载相关</li>
<li>类加载时会先把编译好的类文件(.class或者jar包)加载到jvm方法区中，这个过程叫做加载，如果这个过程中没找类文件就会出现ClassNotFoundException</li>
<li>如果加载成功之后，jvm中会有一个该类的类对象(class对象),创建对象时就通过这个类对象，当在内存中没有找到这个类对象时就会出现NoClassDefFoundException</li>
</ul>
<h3 id="ClassNotFoundException"><a href="#ClassNotFoundException" class="headerlink" title="ClassNotFoundException"></a>ClassNotFoundException</h3><ul>
<li>这类异常出现在对类进行加载时，该路径下找不到对应的class文件。</li>
<li>比如通过Class.forName()加载类时没有找到class文件</li>
<li>比如通过类加载器ClassLoader加载loadClass()，或者findSystemClass()时没有找到class</li>
</ul>
<h3 id="NotClassDefFoundError"><a href="#NotClassDefFoundError" class="headerlink" title="NotClassDefFoundError"></a>NotClassDefFoundError</h3><ul>
<li>这类错误发生在运行时</li>
<li>通常是编译通过，但当运行时使用new参数该类对象时，找不到类的定义造成</li>
<li>通常是由于一个类中引用了另外的一个类，而被引用的类没有被classLoader找到</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://josephagk.github.io/Blog/2019/01/29/js正则/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JosephGK">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="你的ENTER键价值千亿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Blog/2019/01/29/js正则/" itemprop="url">js正则表达式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-29T00:00:00+08:00">
                2019-01-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="js正则"><a href="#js正则" class="headerlink" title="js正则"></a>js正则</h2><h3 id="正则对象创建"><a href="#正则对象创建" class="headerlink" title="正则对象创建"></a>正则对象创建</h3><h4 id="使用构造方式创建"><a href="#使用构造方式创建" class="headerlink" title="使用构造方式创建"></a>使用构造方式创建</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'abc'</span>,<span class="string">'gi'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>第一个参数是正则内容，第二个参数是修饰符</li>
<li>修饰符通常有三种</li>
<li>i:表示忽略大小写匹配</li>
<li>g:表示全局匹配,即匹配到第一个之后不停止继续匹配</li>
<li>m:表示多行匹配,即遇到换行后不停止匹配，直到被匹配字符串结束</li>
</ul>
<h4 id="使用字面量方式创建"><a href="#使用字面量方式创建" class="headerlink" title="使用字面量方式创建"></a>使用字面量方式创建</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/abc/gi</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>两个斜杠之间的是定义的正则内容</li>
<li>最后一个斜杠之后的是修饰符</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://josephagk.github.io/Blog/2019/01/24/elasticsearch基础/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JosephGK">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="你的ENTER键价值千亿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Blog/2019/01/24/elasticsearch基础/" itemprop="url">elasticsearch基础</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-24T00:00:00+08:00">
                2019-01-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/elasticsearch/" itemprop="url" rel="index">
                    <span itemprop="name">elasticsearch</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="elasticsearch"><a href="#elasticsearch" class="headerlink" title="elasticsearch"></a>elasticsearch</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br></pre></td><td class="code"><pre><span class="line"># 创建索引</span><br><span class="line"># 分片为3(一旦确定不能修改)</span><br><span class="line"># 备份为0</span><br><span class="line">PUT /lib/</span><br><span class="line">&#123;</span><br><span class="line">  "settings":&#123;</span><br><span class="line">    "index":&#123;</span><br><span class="line">      "number_of_shards":3,</span><br><span class="line">      "number_of_replicas":0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 直接创建索引，使用默认的配置</span><br><span class="line">PUT lib2</span><br><span class="line"></span><br><span class="line">#查看索引的配置</span><br><span class="line">GET lib/_settings</span><br><span class="line">GET lib2/_settings</span><br><span class="line"></span><br><span class="line">#查看所有索引的配置</span><br><span class="line">GET _all/_settings</span><br><span class="line"></span><br><span class="line">####添加文档</span><br><span class="line">#使用put生成指定id的文档</span><br><span class="line">#使用post生成自动生成id的文档</span><br><span class="line">PUT /lib/user/1</span><br><span class="line">&#123;</span><br><span class="line">  "first_name":"Jane",</span><br><span class="line">  "last_name":"Smith",</span><br><span class="line">  "age":32,</span><br><span class="line">  "about":"I like to collect rock albums",</span><br><span class="line">  "interests":["music"]</span><br><span class="line">&#125;</span><br><span class="line">POST /lib/user/</span><br><span class="line">&#123;</span><br><span class="line">  "first_name":"Douglas",</span><br><span class="line">  "last_name":"Fir",</span><br><span class="line">  "age":23,</span><br><span class="line">  "about":"I like to build cabinets",</span><br><span class="line">  "interests":["forestry"]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#根据id获取文档</span><br><span class="line">GET /lib/user/1</span><br><span class="line">GET /lib/user/5iPaG2gBtKq2hhRQ9SLS</span><br><span class="line"></span><br><span class="line">#获取指定字段的值</span><br><span class="line">#根据id只获取age和about的值</span><br><span class="line">GET /lib/user/1?_source=age,about</span><br><span class="line"></span><br><span class="line">####更新文档</span><br><span class="line">#使用put方式根据id覆盖更新</span><br><span class="line">PUT /lib/user/1</span><br><span class="line">&#123;</span><br><span class="line">  "first_name":"Jane",</span><br><span class="line">  "last_name":"Smith",</span><br><span class="line">  "age":36,</span><br><span class="line">  "about":"I like to collect rock albums",</span><br><span class="line">  "interests":["music"]</span><br><span class="line">&#125;</span><br><span class="line">#使用post方式更新指定字段</span><br><span class="line">POST /lib/user/1/_update</span><br><span class="line">&#123;</span><br><span class="line">  "doc":&#123;</span><br><span class="line">    "age":30</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">####删除</span><br><span class="line">#删除文档</span><br><span class="line">DELETE /lib/user/1</span><br><span class="line">#删除索引</span><br><span class="line">DELETE lib2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">####_mget批量获取</span><br><span class="line">GET /_mget</span><br><span class="line">&#123;</span><br><span class="line">  "docs":[</span><br><span class="line">    &#123;</span><br><span class="line">      "_index":"lib",</span><br><span class="line">      "_type":"user",</span><br><span class="line">      "_id":1</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      "_index":"lib",</span><br><span class="line">      "_type":"user",</span><br><span class="line">      "_id":2</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      "_index":"lib",</span><br><span class="line">      "_type":"user",</span><br><span class="line">      "_id":3</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">#指定字段的批量获取</span><br><span class="line">GET /_mget</span><br><span class="line">&#123;</span><br><span class="line">  "docs":[</span><br><span class="line">    &#123;</span><br><span class="line">      "_index":"lib",</span><br><span class="line">      "_type":"user",</span><br><span class="line">      "_id":1,</span><br><span class="line">      "_source":"interests"</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      "_index":"lib",</span><br><span class="line">      "_type":"user",</span><br><span class="line">      "_id":2,</span><br><span class="line">      "_source":["age","interests"]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">#获取的数据有相同点是可以简化</span><br><span class="line">GET /lib/user/_mget</span><br><span class="line">&#123;</span><br><span class="line">  "docs":[</span><br><span class="line">    &#123;</span><br><span class="line">      "_id":1,</span><br><span class="line">      "_source":"interests"</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      "_id":2,</span><br><span class="line">      "_source":["age","interests"]</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">GET /lib/user/_mget</span><br><span class="line">&#123;</span><br><span class="line">  "ids":["1","2","3"]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">####bulk批量操作</span><br><span class="line">#格式：</span><br><span class="line">#&#123;action:&#123;metadata&#125;&#125;\n</span><br><span class="line">#&#123;requestbode&#125;\n</span><br><span class="line">#action:</span><br><span class="line">#1.create:不存在时创建，存在时操作失败</span><br><span class="line">#2.index:不存在时创建，存在时替换</span><br><span class="line">#3.update:更新文档</span><br><span class="line">#4.delete:删除一个文档</span><br><span class="line">#metadata:指定索引、类型、id</span><br><span class="line"></span><br><span class="line">#批量添加</span><br><span class="line">POST /lib2/books/_bulk</span><br><span class="line">&#123;"index":&#123;"_id":1&#125;&#125;</span><br><span class="line">&#123;"title":"Java","price":55&#125;</span><br><span class="line">&#123;"index":&#123;"_id":2&#125;&#125;</span><br><span class="line">&#123;"title":"Html5","price":45&#125;</span><br><span class="line">&#123;"index":&#123;"_id":3&#125;&#125;</span><br><span class="line">&#123;"title":"Php","price":35&#125;</span><br><span class="line">&#123;"index":&#123;"_id":4&#125;&#125;</span><br><span class="line">&#123;"title":"Python","price":50&#125;</span><br><span class="line"></span><br><span class="line">#混合批量操作</span><br><span class="line">#混合批量操作时可以在每个操作中指定索引类型</span><br><span class="line">POST /lib2/books/_bulk</span><br><span class="line">&#123;"update":&#123;"_index":"lib2","_type":"books","_id":4&#125;&#125;</span><br><span class="line">&#123;"doc":&#123;"price":58&#125;&#125;</span><br><span class="line">&#123;"delete":&#123;"_index":"lib2","_type":"books","_id":4&#125;&#125;</span><br><span class="line">&#123;"create":&#123;"_index":"tt","_type":"ttt","_id":"100"&#125;&#125;</span><br><span class="line">&#123;"name":"lisi"&#125;</span><br><span class="line">&#123;"index":&#123;"_index":"tt","_type":"ttt"&#125;&#125;</span><br><span class="line">&#123;"name":"zhaosi"&#125;</span><br><span class="line"></span><br><span class="line">####版本控制</span><br><span class="line">#每次的文档操作都会使文档的版本_version增加1</span><br><span class="line">#内部版本控制时当传入的版本与库中版本一致时操作才会成功</span><br><span class="line">PUT /lib/user/1?version=18</span><br><span class="line">&#123;</span><br><span class="line">  "first_name":"Jane",</span><br><span class="line">  "last_name":"Smith",</span><br><span class="line">  "age":32,</span><br><span class="line">  "about":"I like to collect rock albums",</span><br><span class="line">  "interests":["music"]</span><br><span class="line">&#125;</span><br><span class="line">#外部版本控制时传入的版本必须大于库中版本操作才会成功</span><br><span class="line">PUT /lib/user/1?version=28&amp;version_type=external</span><br><span class="line">&#123;</span><br><span class="line">  "first_name":"Jane",</span><br><span class="line">  "last_name":"Smith",</span><br><span class="line">  "age":32,</span><br><span class="line">  "about":"I like to collect rock albums",</span><br><span class="line">  "interests":["music"]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">####mapping</span><br><span class="line">#添加文档时会自动添加字段的属性</span><br><span class="line">#true,false被设置为boolean类型</span><br><span class="line">#"afdfa"被设置为string类型</span><br><span class="line">#string类型分为text和keyword。text会分词建立索引，不能用来排序和聚合。keyword不能分词，可以用来过滤、排序和聚合</span><br><span class="line">#119等被设置为long类型</span><br><span class="line">#123.45等被设置为double类型</span><br><span class="line">#1990-12-12等被设置为date类型</span><br><span class="line"></span><br><span class="line">PUT /myindex/article/1</span><br><span class="line">&#123;</span><br><span class="line">  "post_date":"2019-01-05",</span><br><span class="line">  "title":"Java",</span><br><span class="line">  "content":"java is the best language",</span><br><span class="line">  "author_id":199</span><br><span class="line">&#125;</span><br><span class="line">#查看mapping</span><br><span class="line">GET /myindex/article/_mapping</span><br><span class="line">#手动常见mapping</span><br><span class="line">#index为false时设置此字段不会被索引</span><br><span class="line">PUT /lib6</span><br><span class="line">&#123;</span><br><span class="line">  "mappings": &#123;</span><br><span class="line">    "books":&#123;</span><br><span class="line">      "properties":&#123;</span><br><span class="line">        "title":&#123;"type":"text"&#125;,</span><br><span class="line">        "name":&#123;"type":"text","analyzer":"standard"&#125;,</span><br><span class="line">        "publish_date":&#123;"type":"date","index":false&#125;,</span><br><span class="line">        "price":&#123;"type":"double"&#125;,</span><br><span class="line">        "number":&#123;"type":"integer"&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">####object类型</span><br><span class="line">PUT /lib5/person/1</span><br><span class="line">&#123;</span><br><span class="line">  "name":"Tom",</span><br><span class="line">  "age":25,</span><br><span class="line">  "birthday":"1992-09-01",</span><br><span class="line">  "address":&#123;</span><br><span class="line">    "country":"china",</span><br><span class="line">    "province":"shandong",</span><br><span class="line">    "city":"qingdao"</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#上边文档对应的底层存储格式</span><br><span class="line">#&#123;</span><br><span class="line">#  "name":["Tom"],</span><br><span class="line">#  "age":[25],</span><br><span class="line">#  "birthday":["1992-09-01"],</span><br><span class="line">#  "address.country":["china"],</span><br><span class="line">#  "address.province":["shandong"],</span><br><span class="line">#  "address.city":["qingdao"]</span><br><span class="line">#&#125;</span><br><span class="line"></span><br><span class="line">#&#123;</span><br><span class="line">#  "persons":[</span><br><span class="line">#    &#123;"name":"lisi",age"27&#125;,  </span><br><span class="line">#    &#123;"name":"wangwu",age"26&#125;,  </span><br><span class="line">#    &#123;"name":"zhangsan",age"23&#125;,  </span><br><span class="line">#  ]</span><br><span class="line">#&#125;</span><br><span class="line">#上边文档对应的底层存储格式</span><br><span class="line">#&#123;</span><br><span class="line">#  "persons.name":["lisi","wangwu","zhangsan"],</span><br><span class="line">#  "persons.age":[27,26,23]</span><br><span class="line">#&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">####基本查询</span><br><span class="line">#query查询分为term和match两类</span><br><span class="line">#数据准备</span><br><span class="line">PUT /lib3</span><br><span class="line">&#123;</span><br><span class="line">  "settings": &#123;</span><br><span class="line">    "number_of_shards": 3,</span><br><span class="line">    "number_of_replicas": 0</span><br><span class="line">  &#125;,</span><br><span class="line">  "mappings": &#123;</span><br><span class="line">    "user":&#123;</span><br><span class="line">      "properties":&#123;</span><br><span class="line">        "name":&#123;"type":"text"&#125;,</span><br><span class="line">        "address":&#123;"type":"text"&#125;,</span><br><span class="line">        "age":&#123;"type":"integer"&#125;,</span><br><span class="line">        "interests":&#123;"type":"text"&#125;,</span><br><span class="line">        "birthday":&#123;"type":"date"&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">PUT /lib3/user/1</span><br><span class="line">&#123;</span><br><span class="line">  "name":"zhaoliu",</span><br><span class="line">  "address":"hei long jiang sheng tie liu shi",</span><br><span class="line">  "age":50,</span><br><span class="line">  "birthday":"1970-12-12",</span><br><span class="line">  "interests":"xi huan hejiu,duanlian,lvyou"</span><br><span class="line">&#125;</span><br><span class="line">PUT /lib3/user/2</span><br><span class="line">&#123;</span><br><span class="line">  "name":"zhaoming",</span><br><span class="line">  "address":"bei jing hai dian qu qing he zhen",</span><br><span class="line">  "age":20,</span><br><span class="line">  "birthday":"1998-10-12",</span><br><span class="line">  "interests":"xi huan hejiu,duanlian,changge"</span><br><span class="line">&#125;</span><br><span class="line">PUT /lib3/user/3</span><br><span class="line">&#123;</span><br><span class="line">  "name":"lisi",</span><br><span class="line">  "address":"bei jing hai dian qu qing he zhen",</span><br><span class="line">  "age":23,</span><br><span class="line">  "birthday":"1998-10-12",</span><br><span class="line">  "interests":"xi huan hejiu,duanlian,changge"</span><br><span class="line">&#125;</span><br><span class="line">PUT /lib3/user/4</span><br><span class="line">&#123;</span><br><span class="line">  "name":"wangwu",</span><br><span class="line">  "address":"bei jing hai dian qu qing he zhen",</span><br><span class="line">  "age":26,</span><br><span class="line">  "birthday":"1995-10-12",</span><br><span class="line">  "interests":"xi huan biancheng,tingyinyue,lvyou"</span><br><span class="line">&#125;</span><br><span class="line">PUT /lib3/user/5</span><br><span class="line">&#123;</span><br><span class="line">  "name":"zhagnsan",</span><br><span class="line">  "address":"bei jing chao yang qu",</span><br><span class="line">  "age":29,</span><br><span class="line">  "birthday":"1998-10-12",</span><br><span class="line">  "interests":"xi huan tingyinyue,changge,tiaowu"</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#简单查询</span><br><span class="line">GET /lib3/user/_search?q=name:lisi</span><br><span class="line">GET /lib3/user/_search?q=interests:changge&amp;sort=age:desc</span><br><span class="line"></span><br><span class="line">#term和terms查询</span><br><span class="line">#term和terms查询时不知道分词器的存在，即请求传入的查询条件不会被分词，直接在倒排索引中查找</span><br><span class="line">#适合数值、日期等不分词的查询</span><br><span class="line">#查询name中含有zhaoliu的</span><br><span class="line">GET /lib3/user/_search/</span><br><span class="line">&#123;</span><br><span class="line">  "query":&#123;</span><br><span class="line">    "term": &#123;"name": "zhaoliu"&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#terms指定多个属性</span><br><span class="line">GET /lib3/user/_search/</span><br><span class="line">&#123;</span><br><span class="line">  "query":&#123;</span><br><span class="line">    "terms": &#123;</span><br><span class="line">      "interests": ["hejiu","changge"]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#只取前两个</span><br><span class="line">GET /lib3/user/_search/</span><br><span class="line">&#123;</span><br><span class="line">  "from": 0,</span><br><span class="line">  "size": 2, </span><br><span class="line">  "query":&#123;</span><br><span class="line">    "terms": &#123;</span><br><span class="line">      "interests": ["hejiu","changge"]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#增加获取数据的属性信息，如version</span><br><span class="line">GET /lib3/user/_search/</span><br><span class="line">&#123;</span><br><span class="line">  "version": true, </span><br><span class="line">  "query":&#123;</span><br><span class="line">    "terms": &#123;</span><br><span class="line">      "interests": ["hejiu","changge"]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#match查询</span><br><span class="line">#match查询会分词，即请求传入的查询条件会先分词再在倒排索引中查询匹配</span><br><span class="line"></span><br><span class="line">GET /lib3/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "match": &#123;</span><br><span class="line">      "name": "zhaoliu,zhaoming"</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#match_all查询所有</span><br><span class="line">GET /lib3/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "match_all": &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#multi_match可以指定多个字段</span><br><span class="line">GET /lib3/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "multi_match": &#123;</span><br><span class="line">      "query": "changge",</span><br><span class="line">      "fields": ["interests","name"]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#match_phrase短语匹配，将请求的查询条件当做一个短语进行匹配，条件依据会分词，但是顺序不能错</span><br><span class="line">GET /lib3/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "match_phrase": &#123;</span><br><span class="line">      "interests": "changge,duanlian"</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#使用_source指定需要取出的字段</span><br><span class="line">GET /lib3/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "_source": ["address","name"], </span><br><span class="line">  "query": &#123;</span><br><span class="line">    "match": &#123;</span><br><span class="line">      "interests": "changge"</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#在includes和excludes确定需要取出的字段</span><br><span class="line">GET /lib3/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "_source": &#123;</span><br><span class="line">    "includes": ["name","address"],</span><br><span class="line">    "excludes": ["age","birthday"]</span><br><span class="line">  &#125;, </span><br><span class="line">  "query": &#123;</span><br><span class="line">    "match_all": &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#可是使用正则表达式</span><br><span class="line">GET /lib3/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "_source": &#123;</span><br><span class="line">    "includes": "addr*"</span><br><span class="line">  &#125;, </span><br><span class="line">  "query": &#123;</span><br><span class="line">    "match_all": &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#使用sort进行排序</span><br><span class="line">GET /lib3/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "match_all": &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  "sort": [</span><br><span class="line">    &#123;</span><br><span class="line">      "age": &#123;</span><br><span class="line">        "order": "asc"</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">#使用match_phrase_prefix进行短语前缀匹配</span><br><span class="line">GET /lib3/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "match_phrase_prefix": &#123;</span><br><span class="line">      "name": "zhao"</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#使用range指定查询的范围</span><br><span class="line">GET /lib3/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "range": &#123;</span><br><span class="line">      "birthday": &#123;</span><br><span class="line">        "from": "1995-10-10",</span><br><span class="line">        "to": "2019-01-05"</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#使用range指定范围查询时，使用是否包含上下边界的关键字</span><br><span class="line">GET /lib3/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "range": &#123;</span><br><span class="line">      "age": &#123;</span><br><span class="line">        "from": 20,</span><br><span class="line">        "to": 25,</span><br><span class="line">        "include_lower":true,</span><br><span class="line">        "include_upper":false</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#使用wildcard可是使用通配符查询</span><br><span class="line">GET /lib3/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "wildcard": &#123;</span><br><span class="line">      "name": "li?i"</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#使用fuzzy进行模糊查询，即请求查询条件分词中有些字母错误，也会模糊匹配出来</span><br><span class="line">GET /lib3/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "fuzzy": &#123;</span><br><span class="line">      "interests": "chagge"</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#使用highlight高亮显示</span><br><span class="line">GET /lib3/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "match_all": &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  "highlight": &#123;</span><br><span class="line">    "fields": &#123;"interests": &#123;&#125;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">####中文query查询(练习之前的查询功能)</span><br><span class="line">#数据准备</span><br><span class="line">PUT /lib4</span><br><span class="line">&#123;</span><br><span class="line">  "settings": &#123;</span><br><span class="line">    "number_of_shards": 3,</span><br><span class="line">    "number_of_replicas": 0</span><br><span class="line">  &#125;,</span><br><span class="line">  "mappings": &#123;</span><br><span class="line">    "user":&#123;</span><br><span class="line">      "properties":&#123;</span><br><span class="line">        "name":&#123;"type":"text","analyzer":"ik_max_word"&#125;,</span><br><span class="line">        "address":&#123;"type":"text","analyzer":"ik_max_word"&#125;,</span><br><span class="line">        "age":&#123;"type":"integer"&#125;,</span><br><span class="line">        "interests":&#123;"type":"text","analyzer":"ik_max_word"&#125;,</span><br><span class="line">        "birthday":&#123;"type":"date"&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">PUT /lib4/user/1</span><br><span class="line">&#123;</span><br><span class="line">  "name":"赵六",</span><br><span class="line">  "address":"黑龙江省铁岭",</span><br><span class="line">  "age":50,</span><br><span class="line">  "birthday":"1970-12-12",</span><br><span class="line">  "interests":"喜欢喝酒,锻炼,说相声"</span><br><span class="line">&#125;</span><br><span class="line">PUT /lib4/user/2</span><br><span class="line">&#123;</span><br><span class="line">  "name":"赵明",</span><br><span class="line">  "address":"北京海淀区清河",</span><br><span class="line">  "age":20,</span><br><span class="line">  "birthday":"1998-10-12",</span><br><span class="line">  "interests":"喜欢喝酒,锻炼,唱歌"</span><br><span class="line">&#125;</span><br><span class="line">PUT /lib4/user/3</span><br><span class="line">&#123;</span><br><span class="line">  "name":"lisi",</span><br><span class="line">  "address":"北京海淀区清河",</span><br><span class="line">  "age":23,</span><br><span class="line">  "birthday":"1998-10-12",</span><br><span class="line">  "interests":"喜欢喝酒,锻炼,唱歌"</span><br><span class="line">&#125;</span><br><span class="line">PUT /lib4/user/4</span><br><span class="line">&#123;</span><br><span class="line">  "name":"王五",</span><br><span class="line">  "address":"北京海淀区清河",</span><br><span class="line">  "age":26,</span><br><span class="line">  "birthday":"1995-10-12",</span><br><span class="line">  "interests":"喜欢编程,听音乐,旅游"</span><br><span class="line">&#125;</span><br><span class="line">PUT /lib4/user/5</span><br><span class="line">&#123;</span><br><span class="line">  "name":"张三",</span><br><span class="line">  "address":"北京海淀区清河",</span><br><span class="line">  "age":29,</span><br><span class="line">  "birthday":"1988-10-12",</span><br><span class="line">  "interests":"喜欢摄影,听音乐,跳舞"</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib4/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "term": &#123;</span><br><span class="line">      "name": &#123;</span><br><span class="line">        "value": "赵"</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib4/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "terms": &#123;</span><br><span class="line">      "interests": [</span><br><span class="line">        "喝酒",</span><br><span class="line">        "唱歌"</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib4/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "version": true, </span><br><span class="line">  "query": &#123;</span><br><span class="line">    "terms": &#123;</span><br><span class="line">      "interests": [</span><br><span class="line">        "喝酒",</span><br><span class="line">        "唱歌"</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib4/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "match": &#123;</span><br><span class="line">      "name": "赵六"</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib4/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "match_all": &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib4/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "multi_match": &#123;</span><br><span class="line">      "query": "唱歌",</span><br><span class="line">      "fields": ["interests","name"]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib4/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "match_phrase": &#123;</span><br><span class="line">      "interests": "锻炼,说相声"</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib4/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "match_phrase_prefix": &#123;</span><br><span class="line">      "name": "赵"</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib4/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "_source": ["address","name"], </span><br><span class="line">  "query": &#123;</span><br><span class="line">    "match": &#123;</span><br><span class="line">      "interests": "唱歌"</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib4/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "_source": &#123;</span><br><span class="line">    "includes": "addr*",</span><br><span class="line">    "excludes":["name","bir*"]</span><br><span class="line">  &#125;,</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "match_all": &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib4/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "match_all": &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  "sort": [</span><br><span class="line">    &#123;</span><br><span class="line">      "age": &#123;</span><br><span class="line">        "order": "asc"</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib4/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "range": &#123;</span><br><span class="line">      "birthday": &#123;</span><br><span class="line">        "from": "1990-10-10",</span><br><span class="line">        "to": "2019-01-05"</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib4/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "range": &#123;</span><br><span class="line">      "age": &#123;</span><br><span class="line">        "from": 20,</span><br><span class="line">        "to": 25,</span><br><span class="line">        "include_lower":true,</span><br><span class="line">        "include_upper":false</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib4/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "wildcard": &#123;</span><br><span class="line">      "name": &#123;</span><br><span class="line">        "value": "赵*"</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib4/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "wildcard": &#123;</span><br><span class="line">      "name": &#123;</span><br><span class="line">        "value": "li?i"</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib4/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "fuzzy": &#123;</span><br><span class="line">      "name": "赵"</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib4/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "fuzzy": &#123;</span><br><span class="line">      "interests": &#123;"value": "喝酒"&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">####filter查询</span><br><span class="line">#与query查询的区别在于，filter查询不计算相关性，可以缓存，别query查询快</span><br><span class="line">#数据准备</span><br><span class="line">POST /lib7/items/_bulk</span><br><span class="line">&#123;"index":&#123;"_id":1&#125;&#125;</span><br><span class="line">&#123;"price":40,"itemId":"ID100123"&#125;</span><br><span class="line">&#123;"index":&#123;"_id":2&#125;&#125;</span><br><span class="line">&#123;"price":50,"itemId":"ID100124"&#125;</span><br><span class="line">&#123;"index":&#123;"_id":3&#125;&#125;</span><br><span class="line">&#123;"price":25,"itemId":"ID100125"&#125;</span><br><span class="line">&#123;"index":&#123;"_id":4&#125;&#125;</span><br><span class="line">&#123;"price":30,"itemId":"ID100126"&#125;</span><br><span class="line">&#123;"index":&#123;"_id":5&#125;&#125;</span><br><span class="line">&#123;"price":null,"itemId":"ID100127"&#125;</span><br><span class="line"></span><br><span class="line">GET /lib7/items/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "bool": &#123;</span><br><span class="line">      "filter": &#123;</span><br><span class="line">        "term": &#123;</span><br><span class="line">          "price": "40"</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib7/items/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "bool": &#123;</span><br><span class="line">      "filter": &#123;</span><br><span class="line">        "terms": &#123;</span><br><span class="line">          "price": [</span><br><span class="line">            25,</span><br><span class="line">            40</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET lib7/items/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "bool": &#123;</span><br><span class="line">      "filter": &#123;</span><br><span class="line">        "term": &#123;</span><br><span class="line">          "itemId": "id100123"</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">####bool查询</span><br><span class="line">#must相当于关系型数据库的and</span><br><span class="line">#should相当于关系型数据库的or</span><br><span class="line">#must_not相当于关系型数据库的not</span><br><span class="line"></span><br><span class="line">GET /lib7/items/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "bool": &#123;</span><br><span class="line">      "should": [</span><br><span class="line">        &#123;"term": &#123;"price": 25&#125;&#125;,</span><br><span class="line">        &#123;"term":&#123;"itemId":"id100123"&#125;&#125;</span><br><span class="line">      ],</span><br><span class="line">      "must_not":&#123;</span><br><span class="line">        "term":&#123;"price":30&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /lib7/items/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "bool": &#123;</span><br><span class="line">      "should": [</span><br><span class="line">        &#123;"term":&#123;"itemId": "id100123"&#125;&#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          "bool": &#123;</span><br><span class="line">            "must": [</span><br><span class="line">              &#123;"term":&#123;"itemId": "id100124"&#125;&#125;,</span><br><span class="line">              &#123;"term":&#123;"price": 40&#125;&#125;</span><br><span class="line">            ]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#使用range查询范围</span><br><span class="line">GET /lib7/items/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "bool": &#123;</span><br><span class="line">      "filter": &#123;</span><br><span class="line">        "range": &#123;</span><br><span class="line">          "price": &#123;</span><br><span class="line">            "gt": 25,</span><br><span class="line">            "lt": 50</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#使用exists判断某字段是否存在</span><br><span class="line">GET /lib7/items/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    "bool": &#123;</span><br><span class="line">      "filter": &#123;</span><br><span class="line">        "exists": &#123;</span><br><span class="line">          "field": "price"</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">####使用aggs进行聚合查询</span><br><span class="line">#使用size关键字可以数据不展示，只展示聚合的结果</span><br><span class="line">GET /lib7/items/_search</span><br><span class="line">&#123;</span><br><span class="line">  "size": 0, </span><br><span class="line">  "aggs": &#123;</span><br><span class="line">    "price_of_sum": &#123;</span><br><span class="line">      "sum": &#123;</span><br><span class="line">        "field": "price"</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">GET /lib7/items/_search</span><br><span class="line">&#123;</span><br><span class="line">  "size": 0, </span><br><span class="line">  "aggs": &#123;</span><br><span class="line">    "price_of_max": &#123;</span><br><span class="line">      "max": &#123;</span><br><span class="line">        "field": "price"</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">GET /lib7/items/_search</span><br><span class="line">&#123;</span><br><span class="line">  "size": 0, </span><br><span class="line">  "aggs": &#123;</span><br><span class="line">    "price_of_min": &#123;</span><br><span class="line">      "min": &#123;</span><br><span class="line">        "field": "price"</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">GET /lib7/items/_search</span><br><span class="line">&#123;</span><br><span class="line">  "size": 0, </span><br><span class="line">  "aggs": &#123;</span><br><span class="line">    "price_of_avg": &#123;</span><br><span class="line">      "avg": &#123;</span><br><span class="line">        "field": "price"</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#使用cardinality求基数(不相同的数据的个数)</span><br><span class="line">GET /lib7/items/_search</span><br><span class="line">&#123;</span><br><span class="line">  "size": 0, </span><br><span class="line">  "aggs": &#123;</span><br><span class="line">    "price_of_cardi": &#123;</span><br><span class="line">      "cardinality": &#123;</span><br><span class="line">        "field": "price"</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#在聚合中使用terms进行分组</span><br><span class="line">GET /lib7/items/_search</span><br><span class="line">&#123;</span><br><span class="line">  "size": 0, </span><br><span class="line">  "aggs": &#123;</span><br><span class="line">    "price_of_group": &#123;</span><br><span class="line">      "terms": &#123;</span><br><span class="line">        "field": "price"</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#综合练习</span><br><span class="line">#对有唱歌兴趣的用户按年龄分组后求每一组的平均值并按倒序排序</span><br><span class="line">GET /lib3/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "size": 0, </span><br><span class="line">  "query": &#123;</span><br><span class="line">    "match": &#123;</span><br><span class="line">      "interests": "changge"</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  "aggs": &#123;</span><br><span class="line">    "age_of_group":&#123;</span><br><span class="line">      "terms": &#123;</span><br><span class="line">        "field": "age",</span><br><span class="line">        "order": &#123;</span><br><span class="line">          "age_of_avg": "desc"</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      "aggs": &#123;</span><br><span class="line">        "age_of_avg": &#123;</span><br><span class="line">          "avg": &#123;</span><br><span class="line">            "field": "age"</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">####复合查询</span><br><span class="line">GET /lib3/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  "query": &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://josephagk.github.io/Blog/2019/01/24/list工具类/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JosephGK">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="你的ENTER键价值千亿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Blog/2019/01/24/list工具类/" itemprop="url">List工具类</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-24T00:00:00+08:00">
                2019-01-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/工具类/" itemprop="url" rel="index">
                    <span itemprop="name">工具类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="list工具类"><a href="#list工具类" class="headerlink" title="list工具类"></a>list工具类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 对list的元素按照多个属性名称排序,</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> list</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> isAsc    true升序，false降序</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> sortnameArr list元素的属性名称</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> &lt;E&gt; <span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(List&lt;E&gt; list, <span class="keyword">final</span> <span class="keyword">boolean</span> isAsc, <span class="keyword">final</span> String... sortnameArr)</span> </span>&#123;</span><br><span class="line">		Collections.sort(list, (a, b) -&gt; &#123;</span><br><span class="line">			<span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sortnameArr.length; i++) &#123;</span><br><span class="line">					ret = ListUtil.compareObject(sortnameArr[i], isAsc, a, b);</span><br><span class="line">					<span class="keyword">if</span> (<span class="number">0</span> != ret) &#123;</span><br><span class="line">						<span class="keyword">break</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> ret;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 给list的每个属性都指定是升序还是降序</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> list</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> sortnameArr 参数数组</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> typeArr     每个属性对应的升降序数组， true升序，false降序</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> &lt;E&gt; <span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(List&lt;E&gt; list, <span class="keyword">final</span> String[] sortnameArr, <span class="keyword">final</span> <span class="keyword">boolean</span>[] typeArr)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (sortnameArr.length != typeArr.length) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"属性数组元素个数和升降序数组元素个数不相等"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		Collections.sort(list, (a, b) -&gt; &#123;</span><br><span class="line">			<span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sortnameArr.length; i++) &#123;</span><br><span class="line">					ret = ListUtil.compareObject(sortnameArr[i], typeArr[i], a, b);</span><br><span class="line">					<span class="keyword">if</span> (<span class="number">0</span> != ret) &#123;</span><br><span class="line">						<span class="keyword">break</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> ret;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 对2个对象按照指定属性名称进行排序</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> sortname 属性名称</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> isAsc    true升序，false降序</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> a</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> b</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> &lt;E&gt; <span class="function"><span class="keyword">int</span> <span class="title">compareObject</span><span class="params">(<span class="keyword">final</span> String sortname, <span class="keyword">final</span> <span class="keyword">boolean</span> isAsc, E a, E b)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> ret;</span><br><span class="line">		Object value1 = ListUtil.forceGetFieldValue(a, sortname);</span><br><span class="line">		Object value2 = ListUtil.forceGetFieldValue(b, sortname);</span><br><span class="line">		String str1 = value1.toString();</span><br><span class="line">		String str2 = value2.toString();</span><br><span class="line">		<span class="keyword">if</span> (value1 <span class="keyword">instanceof</span> Number &amp;&amp; value2 <span class="keyword">instanceof</span> Number) &#123;</span><br><span class="line">			<span class="keyword">int</span> maxlen = Math.max(str1.length(), str2.length());</span><br><span class="line">			str1 = ListUtil.addZero2Str((Number) value1, maxlen);</span><br><span class="line">			str2 = ListUtil.addZero2Str((Number) value2, maxlen);</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (value1 <span class="keyword">instanceof</span> Date &amp;&amp; value2 <span class="keyword">instanceof</span> Date) &#123;</span><br><span class="line">			<span class="keyword">long</span> time1 = ((Date) value1).getTime();</span><br><span class="line">			<span class="keyword">long</span> time2 = ((Date) value2).getTime();</span><br><span class="line">			<span class="keyword">int</span> maxlen = Long.toString(Math.max(time1, time2)).length();</span><br><span class="line">			str1 = ListUtil.addZero2Str(time1, maxlen);</span><br><span class="line">			str2 = ListUtil.addZero2Str(time2, maxlen);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (isAsc) &#123;</span><br><span class="line">			ret = str1.compareTo(str2);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			ret = str2.compareTo(str1);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> ret;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 给数字对象按照指定长度在左侧补0.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;</span></span><br><span class="line"><span class="comment">	 * 使用案例: addZero2Str(11,4) 返回 "0011", addZero2Str(-18,6)返回 "-000018"</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> numObj 数字对象</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> length 指定的长度</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">addZero2Str</span><span class="params">(Number numObj, <span class="keyword">int</span> length)</span> </span>&#123;</span><br><span class="line">		NumberFormat nf = NumberFormat.getInstance();</span><br><span class="line">		<span class="comment">// 设置是否使用分组</span></span><br><span class="line">		nf.setGroupingUsed(<span class="keyword">false</span>);</span><br><span class="line">		<span class="comment">// 设置最大整数位数</span></span><br><span class="line">		nf.setMaximumIntegerDigits(length);</span><br><span class="line">		<span class="comment">// 设置最小整数位数</span></span><br><span class="line">		nf.setMinimumIntegerDigits(length);</span><br><span class="line">		<span class="keyword">return</span> nf.format(numObj);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 获取指定对象的指定属性值（去除private,protected的限制）</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> obj       属性名称所在的对象</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> fieldName 属性名称</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">forceGetFieldValue</span><span class="params">(Object obj, String fieldName)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		Field field = obj.getClass().getDeclaredField(fieldName);</span><br><span class="line">		Object object = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">boolean</span> accessible = field.isAccessible();</span><br><span class="line">		<span class="keyword">if</span> (!accessible) &#123;</span><br><span class="line">			<span class="comment">// 如果是private,protected修饰的属性，需要修改为可以访问的</span></span><br><span class="line">			field.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">			object = field.get(obj);</span><br><span class="line">			<span class="comment">// 还原private,protected属性的访问性质</span></span><br><span class="line">			field.setAccessible(accessible);</span><br><span class="line">			<span class="keyword">return</span> object;</span><br><span class="line">		&#125;</span><br><span class="line">		object = field.get(obj);</span><br><span class="line">		<span class="keyword">return</span> object;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://josephagk.github.io/Blog/2018/12/27/swal基本使用/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JosephGK">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="你的ENTER键价值千亿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Blog/2018/12/27/swal基本使用/" itemprop="url">swal</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-27T17:57:52+08:00">
                2018-12-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">swal(&#123;</span><br><span class="line">  title: <span class="string">"确认删除?"</span>,</span><br><span class="line">  text: <span class="string">"Your will not be able to recover this imaginary file!"</span>,</span><br><span class="line">  type: <span class="string">"warning"</span>,</span><br><span class="line">  showCancelButton: <span class="literal">true</span>,</span><br><span class="line">  confirmButtonColor: <span class="string">"#DD6B55"</span>,</span><br><span class="line">  confirmButtonText: <span class="string">"确认"</span>,</span><br><span class="line">  cancelButtonText: <span class="string">"取消"</span>,</span><br><span class="line">  closeOnConfirm: <span class="literal">false</span>,</span><br><span class="line">  closeOnCancel: <span class="literal">false</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">isConfirm</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (isConfirm) &#123;</span><br><span class="line">    swal(<span class="string">"Deleted!"</span>, <span class="string">"Your imaginary file has been deleted."</span>, <span class="string">"success"</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        swal(<span class="string">"Cancelled"</span>, <span class="string">"Your imaginary file is safe :)"</span>, <span class="string">"error"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://josephagk.github.io/Blog/2018/12/22/servlet3.0/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JosephGK">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="你的ENTER键价值千亿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Blog/2018/12/22/servlet3.0/" itemprop="url">Servlet3.0新增特性</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-22T00:00:00+08:00">
                2018-12-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/servlet/" itemprop="url" rel="index">
                    <span itemprop="name">servlet</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><ul>
<li>增加注解支持，使用@WebServlet @Filter @Listener等注解代替在web.xml中的配置</li>
<li>支持Web模块</li>
<li>增加Servlet异步处理</li>
<li>文件上传的API简化</li>
</ul>
<h3 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h3><ul>
<li>@WebServlet ：修饰Servlet类，代替web.xml中的配置</li>
<li>@WebFilter：修饰Filter类，代替web.xml中的配置</li>
<li>@WebInitParam：与@WebServlet或@WebFilter注解连用，为servlet设置初始化参数</li>
<li>@MultipartConfig：修饰Servlet类，指定该Servlet类负责处理multipart/form-data类型请求（文件上传的请求）</li>
<li>@ServletSecurity：修饰Servlet类，与JAAS(Java验证和授权API)有关的注解</li>
<li>@HttpConstrait：与@ServletSecurity连用</li>
<li>@HttpMethodConstrait：与@ServletSecurity连用</li>
</ul>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><pre><code>@WebServlet(name = &quot;HelloServlet&quot;, urlPatterns = { &quot;/helloServlet&quot; }, loadOnStartup = 1, initParams = {
        @WebInitParam(name = &quot;userName&quot;, value = &quot;joseph&quot;), @WebInitParam(name = &quot;age&quot;, value = &quot;18&quot;) })
public class ServletAnnotation extends HttpServlet {

    String userName;
    String age;

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {
        System.out.println(&quot;=======get test HelloServlet=======&quot;);
        resp.getOutputStream()
                .write((&quot;=======get test HelloServlet=======\n userName=&quot; + userName + &quot; age=&quot; + age).getBytes());
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException {
        System.out.println(&quot;=======post test HelloServlet=======&quot;);
        resp.getOutputStream()
                .write((&quot;=======get test HelloServlet=======\n userName=&quot; + userName + &quot; age=&quot; + age).getBytes());
    }
}

@WebListener
public class ListenerAnnotation implements ServletRequestListener {
    @Override public void requestInitialized(ServletRequestEvent sre) {
        System.out.println(&quot;=======webListener======&quot;);
    }

    @Override public void requestDestroyed(ServletRequestEvent sre) {
        System.out.println(&quot;=======webListener======&quot;);
    }
}

@WebFilter(filterName = &quot;myFilter&quot;, urlPatterns = { &quot;/*&quot; }, initParams = {
        @WebInitParam(name = &quot;ref&quot;, value = &quot;test&quot;) })
public class FilterAnnotation implements Filter {
    // 初始化过滤器
    @Override
    public void init(FilterConfig config) throws ServletException {
        // 取得初始化参数
        String initParam = config.getInitParameter(&quot;ref&quot;);
        System.out.println(&quot;=========webfilter=======&quot;);
        System.out.println(&quot;** 过滤器初始化，初始化参数 = &quot; + initParam);
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)
            throws IOException, ServletException {
        System.out.println(&quot;** 执行doFilter()方法之前。&quot;);
        // 将请求继续传递
        chain.doFilter(request, response);
        System.out.println(&quot;** 执行doFilter()方法之后。&quot;);
    }

    @Override
    public void destroy() {
        System.out.println(&quot;*========过滤器销毁=========&quot;);
    }

}
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://josephagk.github.io/Blog/2018/12/22/other/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JosephGK">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="你的ENTER键价值千亿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Blog/2018/12/22/other/" itemprop="url">StringTokenizer</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-22T00:00:00+08:00">
                2018-12-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/other/" itemprop="url" rel="index">
                    <span itemprop="name">other</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="实践问题汇总"><a href="#实践问题汇总" class="headerlink" title="实践问题汇总"></a>实践问题汇总</h2><h3 id="情景"><a href="#情景" class="headerlink" title="情景"></a>情景</h3><pre><code>业务上的审批操作允许的多个人审批，但对于每一个业务只能审批一次，即甲审批修改了状态之后乙就不能审批了，如何在程序中保证一条业务只能审批一次
</code></pre><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><pre><code>直接想到的方法就是在进行审批更新之前，在数据库中查询是否已经修改，根据结果判断是否要执行更新操作，但此种方法由于数据库查询不是安全的，可能出现这条记录已经修改但是没有提交，此时的查询不能查询出未提交的状态，所以根据查询判断是不能保证只审批一次的。正确的做法是不进行查询，直接进行更新操作，更新的条件中增加上状态字段，由于更新操作会锁对应的记录，所以不会出现两次更新数据一致性问题，更新的结果就是只有一个更新操作会成功，另一个由于更新中的状态筛选条件而无法找到对应的数据而更新失败。
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://josephagk.github.io/Blog/2018/12/13/循环标签/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JosephGK">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="你的ENTER键价值千亿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Blog/2018/12/13/循环标签/" itemprop="url">循环标签</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-13T00:00:00+08:00">
                2018-12-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/java-se/" itemprop="url" rel="index">
                    <span itemprop="name">java se</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">normalContinue</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"------------非标签continue----------"</span>);</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">			System.out.println(<span class="string">"外层循环"</span> + i);</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line">				<span class="keyword">if</span>(j==<span class="number">2</span>)&#123;</span><br><span class="line">					<span class="keyword">continue</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				System.out.println(<span class="string">"内部循环"</span> + j);</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println(<span class="string">"*************"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"------------非标签continue----------"</span>);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">normalBreak</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"------------非标签break----------"</span>);</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">			System.out.println(<span class="string">"外层循环"</span> + i);</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line">				<span class="keyword">if</span>(j==<span class="number">2</span>)&#123;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				System.out.println(<span class="string">"内部循环"</span> + j);</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println(<span class="string">"*************"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"------------非标签break----------"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//使用continue outer跳出内层循环的时候，外层循环后面的语句也不会执行</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">labelContinue</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"------------标签continue----------"</span>);</span><br><span class="line">		outer:</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">			System.out.println(<span class="string">"外层循环"</span> + i);</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line">				<span class="keyword">if</span>(j==<span class="number">2</span>)&#123;</span><br><span class="line">					<span class="keyword">continue</span> outer;</span><br><span class="line">				&#125;</span><br><span class="line">				System.out.println(<span class="string">"内部循环"</span> + j);</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println(<span class="string">"*************"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"------------标签continue----------"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//break+标签 直接把内外层循环一起break</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">labelBreak</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"------------标签break----------"</span>);</span><br><span class="line">		outer:</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">			System.out.println(<span class="string">"外层循环"</span> + i);</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line">				<span class="keyword">if</span>(j==<span class="number">2</span>)&#123;</span><br><span class="line">					<span class="keyword">break</span> outer;</span><br><span class="line">				&#125;</span><br><span class="line">				System.out.println(<span class="string">"内部循环"</span> + j);</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println(<span class="string">"*************"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"------------标签break----------"</span>);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://josephagk.github.io/Blog/2018/12/12/ftp工具类/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JosephGK">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="你的ENTER键价值千亿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Blog/2018/12/12/ftp工具类/" itemprop="url">ftp工具类</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-12T00:00:00+08:00">
                2018-12-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/java-ee/" itemprop="url" rel="index">
                    <span itemprop="name">java ee</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <pre><code>public class FtpCli {
    private static final String DEFAULT_CHARSET = &quot;UTF-8&quot;;
    private static final int DEFAULT_TIMEOUT = 60 * 1000;
    private static final String DAILY_FILE_PATH = &quot;dailyFilePath&quot;;
    private final String host;
    private final int port;
    private final String username;
    private final String password;
    private FTPClient ftpClient;
    private volatile String ftpBasePath;

private FtpCli(String host, String username, String password) {
    this(host, 21, username, password, DEFAULT_CHARSET);
    setTimeout(DEFAULT_TIMEOUT, DEFAULT_TIMEOUT, DEFAULT_TIMEOUT);
}

private FtpCli(String host, int port, String username, String password, String charset) {
    ftpClient = new FTPClient();
    ftpClient.setControlEncoding(charset);
    this.host = StringUtils.isEmpty(host) ? &quot;localhost&quot; : host;
    this.port = (port &lt;= 0) ? 21 : port;
    this.username = StringUtils.isEmpty(username) ? &quot;anonymous&quot; : username;
    this.password = password;
}

/**
 * 创建默认的ftp客户端
 * @param host     主机名或者ip地址
 * @param username ftp用户名
 * @param password ftp密码
 */
public static FtpCli createFtpCli(String host, String username, String password) {
    return new FtpCli(host, username, password);
}

/**
 * 创建自定义属性的ftp客户端
 * @param host     主机名或者ip地址
 * @param port     ftp端口
 * @param username ftp用户名
 * @param password ftp密码
 * @param charset  字符集
 */
public static FtpCli createFtpCli(String host, int port, String username, String password, String charset) {
    return new FtpCli(host, port, username, password, charset);
}

/**
 * 设置超时时间
 * @param defaultTimeout 超时时间
 * @param connectTimeout 超时时间
 * @param dataTimeout    超时时间
 */
public void setTimeout(int defaultTimeout, int connectTimeout, int dataTimeout) {
    ftpClient.setDefaultTimeout(defaultTimeout);
    ftpClient.setConnectTimeout(connectTimeout);
    ftpClient.setDataTimeout(dataTimeout);
}

/**
 * 连接到ftp
 */
public void connect() throws IOException {
    try {
        ftpClient.connect(host, port);
    } catch (UnknownHostException e) {
        throw new IOException(&quot;Can&apos;t find FTP server :&quot; + host);
    }

    int reply = ftpClient.getReplyCode();
    if (!FTPReply.isPositiveCompletion(reply)) {
        disconnect();
        throw new IOException(&quot;Can&apos;t connect to server :&quot; + host);
    }

    if (!ftpClient.login(username, password)) {
        disconnect();
        throw new IOException(&quot;Can&apos;t login to server :&quot; + host);
    }

    // set data transfer mode.
    ftpClient.setFileType(FTP.BINARY_FILE_TYPE);

    // Use passive mode to pass firewalls.
    ftpClient.enterLocalPassiveMode();

    initFtpBasePath();
}

/**
 * 连接ftp时保存刚登陆ftp时的路径
 */
private void initFtpBasePath() throws IOException {
    if (StringUtils.isEmpty(ftpBasePath)) {
        synchronized (this) {
            if (StringUtils.isEmpty(ftpBasePath)) {
                ftpBasePath = ftpClient.printWorkingDirectory();
            }
        }
    }
}

/**
 * ftp是否处于连接状态，是连接状态返回&lt;tt&gt;true&lt;/tt&gt;
 * @return boolean  是连接状态返回&lt;tt&gt;true&lt;/tt&gt;
 */
public boolean isConnected() {
    return ftpClient.isConnected();
}

/**
 * 上传文件到对应日期文件下，
 * 如当前时间是2018-06-06，则上传到[ftpBasePath]/[DAILY_FILE_PATH]/2018/06/06/下
 * @param fileName    文件名
 * @param inputStream 文件输入流
 */
public String uploadFileToDailyDir(String fileName, InputStream inputStream) throws IOException {
    changeWorkingDirectory(ftpBasePath);
    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;/yyyy/MM/dd&quot;);
    String formatDatePath = dateFormat.format(new Date());
    String uploadDir = DAILY_FILE_PATH + formatDatePath;
    makeDirs(uploadDir);
    storeFile(fileName, inputStream);
    return formatDatePath + &quot;/&quot; + fileName;
}

/**
 * 根据uploadFileToDailyDir返回的路径，从ftp下载文件到指定输出流中
 * @param dailyDirFilePath 方法uploadFileToDailyDir返回的路径
 * @param outputStream     输出流
 */
public void downloadFileFromDailyDir(String dailyDirFilePath, OutputStream outputStream) throws IOException {
    changeWorkingDirectory(ftpBasePath);
    String ftpRealFilePath = dailyDirFilePath;
    ftpClient.retrieveFile(ftpRealFilePath, outputStream);
}

/**
 * 获取ftp上指定文件名到输出流中
 * @param ftpFileName 文件在ftp上的路径  如绝对路径 /home/ftpuser/123.txt 或者相对路径 123.txt
 * @param out         输出流
 */
public void retrieveFile(String ftpFileName, OutputStream out) throws IOException {
    try {
        FTPFile[] fileInfoArray = ftpClient.listFiles(ftpFileName);
        if (fileInfoArray == null || fileInfoArray.length == 0) {
            throw new FileNotFoundException(&quot;File &apos;&quot; + ftpFileName + &quot;&apos; was not found on FTP server.&quot;);
        }

        FTPFile fileInfo = fileInfoArray[0];
        if (fileInfo.getSize() &gt; Integer.MAX_VALUE) {
            throw new IOException(&quot;File &apos;&quot; + ftpFileName + &quot;&apos; is too large.&quot;);
        }

        if (!ftpClient.retrieveFile(ftpFileName, out)) {
            throw new IOException(
                    &quot;Error loading file &apos;&quot; + ftpFileName + &quot;&apos; from FTP server. Check FTP permissions and path.&quot;);
        }
        out.flush();
    } finally {
        closeStream(out);
    }
}

/**
 * 将输入流存储到指定的ftp路径下
 * @param ftpFileName 文件在ftp上的路径 如绝对路径 /home/ftpuser/123.txt 或者相对路径 123.txt
 * @param in          输入流
 */
public void storeFile(String ftpFileName, InputStream in) throws IOException {
    try {
        if (!ftpClient.storeFile(ftpFileName, in)) {
            throw new IOException(
                    &quot;Can&apos;t upload file &apos;&quot; + ftpFileName + &quot;&apos; to FTP server. Check FTP permissions and path.&quot;);
        }
    } finally {
        closeStream(in);
    }
}

/**
 * 根据文件ftp路径名称删除文件
 * @param ftpFileName 文件ftp路径名称
 */
public void deleteFile(String ftpFileName) throws IOException {
    if (!ftpClient.deleteFile(ftpFileName)) {
        throw new IOException(&quot;Can&apos;t remove file &apos;&quot; + ftpFileName + &quot;&apos; from FTP server.&quot;);
    }
}

/**
 * 上传文件到ftp
 * @param ftpFileName 上传到ftp文件路径名称
 * @param localFile   本地文件路径名称
 */
public void upload(String ftpFileName, File localFile) throws IOException {
    if (!localFile.exists()) {
        throw new IOException(&quot;Can&apos;t upload &apos;&quot; + localFile.getAbsolutePath() + &quot;&apos;. This file doesn&apos;t exist.&quot;);
    }

    InputStream in = null;
    try {
        in = new BufferedInputStream(new FileInputStream(localFile));
        if (!ftpClient.storeFile(ftpFileName, in)) {
            throw new IOException(
                    &quot;Can&apos;t upload file &apos;&quot; + ftpFileName + &quot;&apos; to FTP server. Check FTP permissions and path.&quot;);
        }
    } finally {
        closeStream(in);
    }
}

/**
 * 上传文件夹到ftp上
 * @param remotePath ftp上文件夹路径名称
 * @param localPath  本地上传的文件夹路径名称
 */
public void uploadDir(String remotePath, String localPath) throws IOException {
    localPath = localPath.replace(&quot;\\\\&quot;, &quot;/&quot;);
    File file = new File(localPath);
    if (file.exists()) {
        if (!ftpClient.changeWorkingDirectory(remotePath)) {
            ftpClient.makeDirectory(remotePath);
            ftpClient.changeWorkingDirectory(remotePath);
        }
        File[] files = file.listFiles();
        if (null != files) {
            for (File f : files) {
                if (f.isDirectory() &amp;&amp; !f.getName().equals(&quot;.&quot;) &amp;&amp; !f.getName().equals(&quot;..&quot;)) {
                    uploadDir(remotePath + &quot;/&quot; + f.getName(), f.getPath());
                } else if (f.isFile()) {
                    upload(remotePath + &quot;/&quot; + f.getName(), f);
                }
            }
        }
    }
}

/**
 * 下载ftp文件到本地上
 * @param ftpFileName ftp文件路径名称
 * @param localFile   本地文件路径名称
 */
public void download(String ftpFileName, File localFile) throws IOException {
    OutputStream out = null;
    try {
        FTPFile[] fileInfoArray = ftpClient.listFiles(ftpFileName);
        if (fileInfoArray == null || fileInfoArray.length == 0) {
            throw new FileNotFoundException(&quot;File &quot; + ftpFileName + &quot; was not found on FTP server.&quot;);
        }

        FTPFile fileInfo = fileInfoArray[0];
        if (fileInfo.getSize() &gt; Integer.MAX_VALUE) {
            throw new IOException(&quot;File &quot; + ftpFileName + &quot; is too large.&quot;);
        }

        out = new BufferedOutputStream(new FileOutputStream(localFile));
        if (!ftpClient.retrieveFile(ftpFileName, out)) {
            throw new IOException(
                    &quot;Error loading file &quot; + ftpFileName + &quot; from FTP server. Check FTP permissions and path.&quot;);
        }
        out.flush();
    } finally {
        closeStream(out);
    }
}

/**
 * 改变工作目录
 * @param dir ftp服务器上目录
 * @return boolean 改变成功返回true
 */
public boolean changeWorkingDirectory(String dir) {
    if (!ftpClient.isConnected()) {
        return false;
    }
    try {
        return ftpClient.changeWorkingDirectory(dir);
    } catch (IOException e) {
    }

    return false;
}

/**
 * 下载ftp服务器下文件夹到本地
 * @param remotePath ftp上文件夹路径名称
 * @param localPath  本地上传的文件夹路径名称
 */
public void downloadDir(String remotePath, String localPath) throws IOException {
    localPath = localPath.replace(&quot;\\\\&quot;, &quot;/&quot;);
    File file = new File(localPath);
    if (!file.exists()) {
        file.mkdirs();
    }
    FTPFile[] ftpFiles = ftpClient.listFiles(remotePath);
    for (int i = 0; ftpFiles != null &amp;&amp; i &lt; ftpFiles.length; i++) {
        FTPFile ftpFile = ftpFiles[i];
        if (ftpFile.isDirectory() &amp;&amp; !ftpFile.getName().equals(&quot;.&quot;) &amp;&amp; !ftpFile.getName().equals(&quot;..&quot;)) {
            downloadDir(remotePath + &quot;/&quot; + ftpFile.getName(), localPath + &quot;/&quot; + ftpFile.getName());
        } else {
            download(remotePath + &quot;/&quot; + ftpFile.getName(), new File(localPath + &quot;/&quot; + ftpFile.getName()));
        }
    }
}

/**
 * 列出ftp上文件目录下的文件
 * @param filePath ftp上文件目录
 */
public List&lt;String&gt; listFileNames(String filePath) throws IOException {
    FTPFile[] ftpFiles = ftpClient.listFiles(filePath);
    List&lt;String&gt; fileList = new ArrayList&lt;&gt;();
    if (ftpFiles != null) {
        for (int i = 0; i &lt; ftpFiles.length; i++) {
            FTPFile ftpFile = ftpFiles[i];
            if (ftpFile.isFile()) {
                fileList.add(ftpFile.getName());
            }
        }
    }

    return fileList;
}

/**
 * 发送ftp命令到ftp服务器中
 * @param args ftp命令
 */
public void sendSiteCommand(String args) throws IOException {
    if (!ftpClient.isConnected()) {
        ftpClient.sendSiteCommand(args);
    }
}

/**
 * 获取当前所处的工作目录
 */
public String printWorkingDirectory() {
    if (!ftpClient.isConnected()) {
        return &quot;&quot;;
    }

    try {
        return ftpClient.printWorkingDirectory();
    } catch (IOException e) {
        // do nothing
    }

    return &quot;&quot;;
}

/**
 * 切换到当前工作目录的父目录下
 */
public boolean changeToParentDirectory() {

    if (!ftpClient.isConnected()) {
        return false;
    }

    try {
        return ftpClient.changeToParentDirectory();
    } catch (IOException e) {
        // do nothing
    }

    return false;
}

/**
 * 返回当前工作目录的上一级目录
 */
public String printParentDirectory() {
    if (!ftpClient.isConnected()) {
        return &quot;&quot;;
    }

    String w = printWorkingDirectory();
    changeToParentDirectory();
    String p = printWorkingDirectory();
    changeWorkingDirectory(w);

    return p;
}

/**
 * 创建目录
 * @param pathname 路径名
 */
public boolean makeDirectory(String pathname) throws IOException {
    return ftpClient.makeDirectory(pathname);
}

/**
 * 创建多个目录
 */
public void makeDirs(String pathname) throws IOException {
    pathname = pathname.replace(&quot;\\\\&quot;, &quot;/&quot;);
    String[] pathnameArray = pathname.split(&quot;/&quot;);
    for (String each : pathnameArray) {
        if (StringUtils.isNotEmpty(each)) {
            ftpClient.makeDirectory(each);
            ftpClient.changeWorkingDirectory(each);
        }
    }
}

/**
 * 关闭流
 */
private static void closeStream(Closeable stream) {
    if (stream != null) {
        try {
            stream.close();
        } catch (IOException ex) {
            // do nothing
        }
    }
}

/**
 * 关闭ftp连接
 */
public void disconnect() {
    if (null != ftpClient &amp;&amp; ftpClient.isConnected()) {
        try {
            ftpClient.logout();
            ftpClient.disconnect();
        } catch (IOException ex) {
            // do nothing
        }
    }
}
public static void main(String[] arg) throws IOException {
        FtpCli ftpCli = FtpCli.createFtpCli(&quot;192.168.191.70&quot;, &quot;administrator&quot;, &quot;admin&quot;);
        ftpCli.connect();
        ftpCli.download(&quot;123/test.txt&quot;,new File(&quot;d:/test1.txt&quot;));
    }
}
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://josephagk.github.io/Blog/2018/12/10/jep/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JosephGK">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="你的ENTER键价值千亿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Blog/2018/12/10/jep/" itemprop="url">jep转换和计算数学表达式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-10T00:00:00+08:00">
                2018-12-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/java-se/" itemprop="url" rel="index">
                    <span itemprop="name">java se</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="引入maven依赖"><a href="#引入maven依赖" class="headerlink" title="引入maven依赖"></a>引入maven依赖</h3><pre><code>&lt;dependency&gt;
    &lt;groupId&gt;jep&lt;/groupId&gt;
    &lt;artifactId&gt;jep&lt;/artifactId&gt;
    &lt;version&gt;2.24&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><pre><code>JEP jep = new JEP();
//设置公式
String expression = &quot;((a+b)*(c+b))/(c+a)/b&quot;;
//变量赋值
jep.addVariable(&quot;a&quot;,10);
jep.addVariable(&quot;b&quot;,10);
jep.addVariable(&quot;c&quot;,10);
//运算
jep.parseExpression(expression);
//结果
System.out.println(jep.getValue());
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/Blog/page/2/">2</a><a class="page-number" href="/Blog/page/3/">3</a><a class="extend next" rel="next" href="/Blog/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">JosephGK</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/Blog/archives/">
              
                  <span class="site-state-item-count">30</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/Blog/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JosephGK</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/Blog/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/Blog/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/Blog/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/Blog/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/Blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/Blog/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/Blog/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/Blog/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/Blog/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/Blog/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/Blog/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
